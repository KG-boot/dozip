<?xml version="1.0" encoding="ISO-8859-1"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Port">

    <!-- ????? ??? ???? (??? ????? resultMap ??)-->
    <select id = "port_list" resultType="PortfolioVO">
       <!-- select * from (
            select pf_no, pf.businessNum, pf_title, pf_type, pf_subtype, pf_range, pf_zipcode, pf_addr1, pf_addr2,pf_addr3,
            pf_area, pf_cost, pf_period, pf_concept, pf_introduction, pf_closing, pf_photo1, pf_photo2, pf_photo3, pf_photo4,
            pf_photo5, pf_premium, pf_regdate, pt.businessName from portfolioT pf, partnersT pt where pf.businessNum=pt.businessNum(+) order by pf_no desc) -->

        select * from portfolioT;

    </select>


<select id="test" resultType="PortfolioVO">
    select * from portfolioT where pf_no=3
</select>

    <!-- ?? ???? ????? ???? -->
    <select id="pf_list" resultType="PortfolioVO">
        select * from portfolioT where pf_no = #{pf_no}
    </select>

    <!-- ?? ???? ?? ?? ????-->
    <select id="pt_list" resultType="PartnersVO">
        select * from partnersT where businessNum = (select businessNum from portfolioT where pf_no = #{pf_no})
    </select>

    <!-- ?? ???? ?? ????-->
    <select id="pc_list" resultType="PartnersVO">
        select * from partnersT where businessName = #{businessName}
    </select>

    <!--????? ??-->
    <insert id="portfolio_in" parameterType="PortfolioVO">
        insert into portfolioT (pf_no, businessNum, pf_title, pf_type, pf_subtype, pf_range, pf_zipcode, pf_addr1, pf_addr2, pf_addr3, pf_area, pf_cost, pf_period,
                                pf_concept, pf_introduction, pf_closing, pf_regdate)
        values (portfolioT_no_seq.nextval, #{businessNum}, #{pf_title}, #{pf_title}, #{pf_type}, #{pf_subtype}, #{pf_zipcode}, #{pf_addr1}, #{pf_addr2},
                #{pf_addr3}, #{pf_area}, #{pf_cost}, #{pf_period}, #{pf_concept}, #{pf_introduction}, #{pf_closing}, sysdate)
    </insert>

    <!--????? ????-->
    <select id="portfolio_num" resultType="int">
        select pf_no from portfolioT where businessNum=#{businessNum} and pf_title=#{pf_title}
    </select>
    
    <!--????? ????-->
    <insert id="insert_photo">
        update portfolioT set  pf_photo1=#{pf_photo1}, pf_photo2=#{pf_photo2}, pf_photo3=#{pf_photo3}, pf_photo4=#{pf_photo4}, pf_photo5=#{pf_photo5} where pf_no=#{pf_no}
    </insert>

</mapper>
