<?xml version="1.0" encoding="ISO-8859-1"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Port">

    <!-- ????? ??? ???? (??? ????? resultMap ??)-->
    <select id = "port_list" resultMap="pvo">
        select * from (
            select pf_no, pf.businessNum, pf_title, pf_type, pf_subtype, pf_range, pf_zipcode, pf_addr1, pf_addr2,pf_addr3,
            pf_area, pf_cost, pf_period, pf_concept, pf_introduction, pf_closing, pf_photo1, pf_photo2, pf_photo3, pf_photo4,
            pf_photo5, pf_premium, pf_regdate, pt.businessName from portfolioT pf, partnersT pt where pf.businessNum=pt.businessNum(+) order by pf_no desc and (pf.businesssNum is not null)
                      )
    </select>

    <!-- ?? ???? ????? ???? -->
    <select id="pf_list" resultType="PortfolioVO">
        select * from portfolioT where pf_no = #{pf_no}
    </select>

    <!-- ?? ???? ?? ?? ????-->
    <select id="pt_list" resultType="PartnersVO">
        select * from partnersT where businessNum = (select businessNum from portfolioT where pf_no = #{pf_no})
    </select>

    <!-- ?? ???? ?? ????-->
    <select id="pc_list" resultType="PartnersVO">
        select * from partnersT where businessName = #{businessName}
    </select>

    <resultMap id="pvo" type="com.dozip.vo.PortfolioVO">
        <result column = "pf_no" property="pf_no"/>
        <result column = "businessNum" property="businessNum"/>
        <result column = "pf_title" property="pf_title"/>
        <result column = "pf_type" property="pf_type"/>
        <result column = "pf_subtype" property="pf_subtype"/>
        <result column = "pf_range" property="pf_range"/>
        <result column="pf_zipcode" property="pf_zipcode"/>
        <result column="pf_addr1" property="pf_addr1"/>
        <result column="pf_addr2" property="pf_addr2"/>
        <result column="pf_addr3" property="pf_addr3"/>
        <result column="pf_area" property="pf_area"/>
        <result column="pf_cost" property="pf_cost"/>
        <result column="pf_period" property="pf_period"/>
        <result column="pf_concept" property="pf_concept"/>
        <result column="pf_introduction" property="pf_introduction"/>
        <result column="pf_closing" property="pf_closing"/>
        <result column="pf_photo1" property="pf_photo1"/>
        <result column="pf_photo2" property="pf_photo2"/>
        <result column="pf_photo3" property="pf_photo3"/>
        <result column="pf_photo4" property="pf_photo4"/>
        <result column="pf_photo5" property="pf_photo5"/>
        <result column="pf_premium" property="pf_premium"/>
        <result column="pf_regdate" property="pf_regdate"/>
        <result column="businessName" property="businessName"/>
    </resultMap>

</mapper>
